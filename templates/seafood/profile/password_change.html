{% extends "layouts/base.html" %}
{% load static %}

{% block title %}Changer le mot de passe - Seafood Portal{% endblock %}

{% block content %}
<div class="pb-5">
  <div class="row align-items-center justify-content-between g-3 mb-4">
    <div class="col-auto">
      <h2 class="mb-0">Changer le mot de passe</h2>
    </div>
  </div>

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <div class="row justify-content-center">
    <div class="col-lg-6">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">Modification du mot de passe</h5>
        </div>
        <div class="card-body">
          <div class="alert alert-info d-flex align-items-center" role="alert">
            <span class="fas fa-info-circle fs-5 me-3"></span>
            <div>
              <small>Pour votre sécurité, veuillez choisir un mot de passe fort contenant des lettres, des chiffres et des caractères spéciaux.</small>
            </div>
          </div>

          <form method="post">
            {% csrf_token %}

            <div class="mb-3">
              <label for="id_old_password" class="form-label">Mot de passe actuel</label>
              <div class="form-icon-container" data-password="data-password">
                <input type="password" class="form-control form-icon-input pe-6" id="id_old_password" name="old_password" required data-password-input="data-password-input">
                <span class="fas fa-key text-body fs-9 form-icon"></span>
                <button class="btn px-3 py-0 h-100 position-absolute top-0 end-0 fs-7 text-body-tertiary" type="button" data-password-toggle="data-password-toggle">
                  <span class="uil uil-eye show"></span>
                  <span class="uil uil-eye-slash hide"></span>
                </button>
              </div>
            </div>

            <div class="mb-3">
              <label for="id_new_password1" class="form-label">Nouveau mot de passe</label>
              <div class="form-icon-container" data-password="data-password">
                <input type="password" class="form-control form-icon-input pe-6" id="id_new_password1" name="new_password1" required data-password-input="data-password-input">
                <span class="fas fa-lock text-body fs-9 form-icon"></span>
                <button class="btn px-3 py-0 h-100 position-absolute top-0 end-0 fs-7 text-body-tertiary" type="button" data-password-toggle="data-password-toggle">
                  <span class="uil uil-eye show"></span>
                  <span class="uil uil-eye-slash hide"></span>
                </button>
              </div>
              <small class="text-muted">
                <ul class="mb-0 mt-2 ps-3">
                  <li>Au moins 8 caractères</li>
                  <li>Ne doit pas être trop similaire à vos autres informations personnelles</li>
                  <li>Ne doit pas être un mot de passe couramment utilisé</li>
                  <li>Ne doit pas être entièrement numérique</li>
                </ul>
              </small>
            </div>

            <div class="mb-3">
              <label for="id_new_password2" class="form-label">Confirmer le nouveau mot de passe</label>
              <div class="form-icon-container" data-password="data-password">
                <input type="password" class="form-control form-icon-input pe-6" id="id_new_password2" name="new_password2" required data-password-input="data-password-input">
                <span class="fas fa-lock text-body fs-9 form-icon"></span>
                <button class="btn px-3 py-0 h-100 position-absolute top-0 end-0 fs-7 text-body-tertiary" type="button" data-password-toggle="data-password-toggle">
                  <span class="uil uil-eye show"></span>
                  <span class="uil uil-eye-slash hide"></span>
                </button>
              </div>
            </div>

            <div class="d-flex justify-content-end gap-2 mt-4">
              <a href="{% url 'portal_admin:profile' %}" class="btn btn-phoenix-secondary">
                <span class="fas fa-times me-2"></span>Annuler
              </a>
              <button type="submit" class="btn btn-primary">
                <span class="fas fa-check me-2"></span>Changer le mot de passe
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-body">
          <h6 class="card-title">
            <span class="fas fa-shield-alt text-warning me-2"></span>
            Conseils de sécurité
          </h6>
          <ul class="mb-0">
            <li>Changez votre mot de passe régulièrement</li>
            <li>N'utilisez pas le même mot de passe pour plusieurs comptes</li>
            <li>Ne partagez jamais votre mot de passe avec qui que ce soit</li>
            <li>Utilisez un gestionnaire de mots de passe pour plus de sécurité</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
